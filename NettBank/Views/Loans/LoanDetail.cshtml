@model NettBank.Models.LoanCompanyViewModel
@using System.Globalization;
@{
    ViewBag.Title = Model.Name;
}

<section class="loanDetails">
    <div class="top-section-background">
        <div class="name-skeleton">
            @Model.Name
        </div>
    </div>
    <div class="container">
        <div class="loan-detail-holder">
            <div class="flex flex-row justify-between items-center lg:px-10">
                <div class="logo-holder">
                    <img src="~/Content/Images/Companies/@Model.ImagePath" class="loan-detail-logo" />
                </div>
                <div class="ratings-holder">
                    <div class="rating">
                        @Model.Rating
                    </div>
                </div>
            </div>


            <div class="loan-detail-body flex justify-between flex-col lg:flex-row pt-6">
                <div class="company-detail lg:w-2/3 lg:mr-6">
                    <div class="bg-white overflow-hidden sm:rounded-lg">
                        <div class="px-4 py-5 border-b border-gray-200 sm:px-6">
                            <div class="text-lg leading-6 font-medium text-gray-600 flex justify-between">
                                <div class="loan-detail-heading flex items-center">
                                    <h2 class="lg:mr-3">Company Details</h2>
                                    <img src="~/Content/Images/checklist.svg" class="h-6" />
                                </div>
                                <div class="Final-link">
                                    <div class="btn enquire btn-search btn-final">Get Loan</div>
                                </div>
                            </div>
                        </div>
                        <div class="sm:border-b-2 lg:border-0 border-gray-200 mb-3 lg:mb-0">
                            <div class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                                <dt class="text-sm leading-5 font-medium text-gray-500">
                                    Interest Rate
                                </dt>
                                <dd class="mt-1 text-2xl leading-5 text-gray-900 sm:mt-0 sm:col-span-2">
                                    @(Model.InterestRate)%
                                </dd>
                            </div>
                            <div class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                                <dt class="text-sm leading-5 font-medium text-gray-500">
                                    Commision Rate
                                </dt>
                                <dd class="mt-1 text-sm leading-5 text-gray-900 sm:mt-0 sm:col-span-2">
                                    @(Model.ComparisonRate)%
                                </dd>
                            </div>
                            <div class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                                <dt class="text-sm leading-5 font-medium text-gray-500">
                                    Max-Duration for all loans
                                </dt>
                                <dd class="mt-1 text-sm leading-5 text-gray-900 sm:mt-0 sm:col-span-2">
                                    @Model.MaxDuration years
                                </dd>
                            </div>
                            <div class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                                <dt class="text-sm leading-5 font-medium text-gray-500">
                                    Maximum Amount Offerable
                                </dt>
                                <dd class="mt-1 text-sm leading-5 text-gray-900 sm:mt-0 sm:col-span-2">
                                 
                                    @Model.MaxAmount.ToString("C", CultureInfo.CreateSpecificCulture("ig-NG"))
                                </dd>
                            </div>
                            <div class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                                <dt class="text-sm leading-5 font-medium text-gray-500">
                                    Minimum Amount Offerable
                                </dt>
                                <dd class="mt-1 text-sm leading-5 text-gray-900 sm:mt-0 sm:col-span-2">
                                    @Model.MinAmount.ToString("C", CultureInfo.CreateSpecificCulture("ig-NG"))
                                </dd>
                            </div>

                            <div class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                                <dt class="text-sm leading-5 font-medium text-gray-500">
                                    Repayment Frequency Acceptable
                                </dt>
                                <dd class="mt-1 text-sm leading-5 text-gray-900 sm:mt-0 sm:col-span-2">
                                    @Model.RepaymentFrequency
                                </dd>
                            </div>


                            <div class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                                <dt class="text-sm leading-5 font-medium text-gray-500">
                                    About
                                </dt>
                                <dd class="mt-1 text-sm leading-5 text-gray-900 sm:mt-0 sm:col-span-2">
                                    Fugiat ipsum ipsum deserunt culpa aute sint do nostrud anim incididunt cillum culpa consequat. Excepteur qui ipsum aliquip consequat sint. Sit id mollit nulla mollit nostrud in ea officia proident. Irure nostrud pariatur mollit ad adipisicing reprehenderit deserunt qui eu.
                                </dd>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="extra-information-holder lg:w-1/3 flex flex-col lg:items-end">
                    <div class="loan-info-final">
                        <div class="loan-type-details bg-indigo-500 h-24 lg:w-64 w-full rounded shadow mb-3 p-4 text-white">
                            <h3 class="text-sm mb-2">Loan Type Requested</h3>
                            <p class="uppercase text-xl font-bold">@ViewBag.loanType</p>
                        </div>
                    </div>

                    <div class="loan-info-final">
                        <div class="loan-type-details bg-indigo-500 h-24 lg:w-64 w-full rounded shadow mb-3 p-4 text-white">
                            <h3 class="text-sm mb-2">Amount Requested</h3>
                            <p class="uppercase text-xl font-bold">@ViewBag.Amount.ToString("C", CultureInfo.CreateSpecificCulture("ig-NG"))</p>
                        </div>
                    </div>

                    <div class="loan-info-final">
                        <div class="loan-type-details bg-indigo-500 h-24 lg:w-64 w-full rounded shadow mb-3 p-4 text-white">
                            <h3 class="text-sm mb-2">Amount payable Monthly</h3>
                            <p class="uppercase text-xl font-bold"> @Model.MonthlyRepayment.ToString("C", CultureInfo.CreateSpecificCulture("ig-NG"))</p>
                        </div>
                    </div>

                    <div class="loan-info-final">
                        <div class="loan-type-details bg-indigo-500 h-24 lg:w-64 w-full rounded shadow mb-3 p-4 text-white">
                            <h3 class="text-sm mb-2">Period</h3>
                            <p class="uppercase text-xl font-bold">@ViewBag.Duration years</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<section class="amortization-table -mt-6">
    <div class="container">
        <h2 class="text-center text-gray-700 font-bold text-3xl">Payment Plans</h2>
        <table class="rwd-table mt-6">
            <tr class="lg:h-20 bg-gray-300 p-2 table-head">
                <th>Month</th>
                <th>Payment Made</th>
                <th>Principal Paid</th>
                <th>Interest Paid</th>
                <th>Remaining Balance</th>
            </tr>

            @{ 
                var count = 0;
            }
            @foreach (var item in Model.RepaymentDetails)
            {
                
                count++;
                <tr class="h-24">
                    <td data-th="Month">@count</td>
                    <td data-th="Payment Made">@item.Payment.ToString("C", CultureInfo.CreateSpecificCulture("ig-NG"))</td>
                    <td data-th="Principal Paid">
                        @item.Principal.ToString("C", CultureInfo.CreateSpecificCulture("ig-NG"))
                    </td>
                    <td data-th="Interest Paid">@item.Interest.ToString("C", CultureInfo.CreateSpecificCulture("ig-NG"))</td>
                    <td data-th="Remaining Balance">
                        @item.Balance.ToString("C", CultureInfo.CreateSpecificCulture("ig-NG"))
                    </td>
                </tr>
              
            }
        </table>
    </div>
</section>

@section scripts{
    <script type="text/javascript">
        $(document).ready(function () {
            $('.rating').each(function () {
                var thz = $(this);
                const starTotal = 5;
                let average = thz.text();

                const starPercentage = (average / starTotal) * 100;
                const starPercentageRounded = `${((starPercentage / 10) * 10)}%`;
                thz.html(`<div class="stars-outer">
                                <div class="stars-inner" style="width:${starPercentageRounded}"></div>
                              </div>`);
            });
        })
    </script>
}

